<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wisp</title>
    <link rel="stylesheet" href="\stylesheets\create_email_style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">


</head>
<body>
    <header class="header">
        <div class="header-left">
            <div class="logo">wisp.</div>
        </div>
        <div class="header-right">
           
            <button class="header-btn" onclick="window.location.href='/logout'">
                LOGOUT
            </button>
        </div>
    </header>


    <div class="container">
        <nav class="sidebar">
            <div class="sidebar-item"  onclick="window.location.href = '/dashboard'">
                <div class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-view-list" viewBox="0 0 16 16">
  <path d="M3 4.5h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2m0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM1 2a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 2m0 12a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 14"/>
</svg></div>
                <span>Dashboard</span>
            </div>
            <div class="sidebar-item active" onclick="window.location.href = '/email'">
                <div class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mailbox" viewBox="0 0 16 16">
  <path d="M4 4a3 3 0 0 0-3 3v6h6V7a3 3 0 0 0-3-3m0-1h8a4 4 0 0 1 4 4v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a4 4 0 0 1 4-4m2.646 1A4 4 0 0 1 8 7v6h7V7a3 3 0 0 0-3-3z"/>
  <path d="M11.793 8.5H9v-1h5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.354-.146zM5 7c0 .552-.448 0-1 0s-1 .552-1 0a1 1 0 0 1 2 0"/>
</svg></div>
                <span>Mail Service</span>
            </div>
    
            
        </nav>

   
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <main class="main-content">
            <div class="breadcrumb" onclick="window.location.href = '/email'" style="cursor: pointer;">Mail Service</div>
            
            <div class="page-header">
                <h1 class="page-title">Create Mail Service</h1>
            </div>
            

            <div class="section">
                <h2 class="section-title">Enter Required Credentials</h2>
                <form action="/create-email-service" method="POST">
                <div class="form-group">
                <label>Name of Service</label>
                <input type="text" placeholder="Enter service name" name="name">
                </div>

                <div class="form-group">
                <label>To</label>
                <input type="email" placeholder="Enter recipient e-mail" name="email">
                </div>
                <div class="form-group">
                <label>Subject</label>
                <input type="text" placeholder="Enter subject" name="subject">
                </div>
                
                <div class="form-group">
                <label>Body</label>
                <textarea name="emailbody" id="emailBody"></textarea>
                </div>


                <h3>Execution Schedule</h3>

                <div class="radio-option">
                <!-- <input type="radio" name="schedule" id="every15" checked> -->
                <label for="schedule">Every
                    <span class="inline-selects">
                    <select name="schedule" id="schedule">
                        <option>1 hour</option>
                        <option>6 hours</option>
                        <option>12 hours</option>
                        <option selected>24 hours</option>
                    </select>
                    </span>
                </label>
                </div>


                <h3>Target Count</h3>

                <div class="radio-option">
                <!-- <input type="dropdown" name="targetCount" id="targetCount" checked> -->
                <label for="targetCount">Set for
                    <span class="inline-selects">
                    <select id="targetCount" name="targetCount">
                        <option selected>1</option>
                        <option>5</option>
                        <option>10</option>
                        <option>50</option>
                        <option>100</option>
                        <option>Infinity</option>
                    </select> iterations.
                    </span>
                </label>
                </div>
                <button>Save Job</button>
                </form>
             </div>
        </main>
    </div>

    <script>
     
        const sidebar = document.querySelector('.sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const menuBtn = document.querySelector('.menu-btn');
        
        function toggleMobileSidebar() {
            sidebar.classList.toggle('mobile-open');
            sidebarOverlay.classList.toggle('show');
            document.body.style.overflow = sidebar.classList.contains('mobile-open') ? 'hidden' : '';
        }

        function closeMobileSidebar() {
            sidebar.classList.remove('mobile-open');
            sidebarOverlay.classList.remove('show');
            document.body.style.overflow = '';
        }

    
        menuBtn.addEventListener('click', toggleMobileSidebar);

        sidebarOverlay.addEventListener('click', closeMobileSidebar);


        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.addEventListener('click', function() {
                
                document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
              
                if (window.innerWidth <= 768) {
                    closeMobileSidebar();
                }
            });
        });

        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeMobileSidebar();
            }
        });

      
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && sidebar.classList.contains('mobile-open')) {
                closeMobileSidebar();
            }
        });

        document.querySelector('.create-btn').addEventListener('click', function() {
            console.log('Navigate to create cronjob page');
        });

        document.querySelector('.learn-more-btn').addEventListener('click', function() {
            console.log('Navigate to membership page');
        });

        document.querySelectorAll('.actions-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                console.log('Show event details');
            });
        });

        

        document.querySelector('.back-btn').addEventListener('click', function() {
            console.log('Navigate back');
        });

        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 100;
            const swipeDistance = touchEndX - touchStartX;
          
            if (swipeDistance > swipeThreshold && touchStartX < 50 && window.innerWidth <= 768) {
                if (!sidebar.classList.contains('mobile-open')) {
                    toggleMobileSidebar();
                }
            }
          
            if (swipeDistance < -swipeThreshold && sidebar.classList.contains('mobile-open')) {
                closeMobileSidebar();
            }
        }

        document.documentElement.style.scrollBehavior = 'smooth';

        function preventBodyScroll(prevent) {
            if (prevent) {
                document.body.style.position = 'fixed';
                document.body.style.top = `-${window.scrollY}px`;
                document.body.style.width = '100%';
            } else {
                const scrollY = document.body.style.top;
                document.body.style.position = '';
                document.body.style.top = '';
                document.body.style.width = '';
                window.scrollTo(0, parseInt(scrollY || '0') * -1);
            }
        }

        const originalToggle = toggleMobileSidebar;
        toggleMobileSidebar = function() {
            const wasOpen = sidebar.classList.contains('mobile-open');
            originalToggle();
            
            if (window.innerWidth <= 768) {
                preventBodyScroll(!wasOpen);
            }
        };

        const originalClose = closeMobileSidebar;
        closeMobileSidebar = function() {
            originalClose();
            if (window.innerWidth <= 768) {
                preventBodyScroll(false);
            }
        };
    </script>
</body>
</html>